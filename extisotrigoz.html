<!-- This file needs to be hosted on an external server.  -->
<html>
  <head>
    <title> IsotrigOz </title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <script language="Javascript">
//
// This method Gets URL Parameters (GUP)
//
function gup( name )
{
  var regexS = "[\\?&]"+name+"=([^&#]*)";
  var regex = new RegExp( regexS );
  var tmpURL = window.location.href;
  var results = regex.exec( tmpURL );
  if( results == null )
    return "";
  else
    return results[1];
}

//
// This method decodes the query parameters that were URL-encoded
//
function decode(strToDecode)
{
  var encoded = strToDecode;
  return unescape(encoded.replace(/\+/g,  " "));
}



function settexture()
{
document.getElementById('texture').src=decode(gup('imageurl'))
}

function setmask()
{
document.getElementById('texture').src="http://marconioz.github.com/isotrigoz/Foot_3_even_r.jpg"
}

</script>
</head>
  <body>

      <form id="mturk_form" method="POST" action="http://workersandbox.mturk.com/mturk/externalSubmit">
      <input id="assignmentId" name="assignmentId" value="" type="hidden">

   
 
        <table >
        <tbody>
          <tr>
            <td>
              <h4>Where is the oddball patch in this image, if any?</h4>
              <p> <input name="category" value="top left" type="radio">&nbsp;Top
                Left <br>
                <input name="category" value="top right" type="radio">&nbsp;Top
                Right <br>
                <input name="category" value="bottom left" type="radio">&nbsp;Bottom
                Left <br>
                <input name="category" value="bottom right" type="radio">&nbsp;Bottom
                Right<br>
                <input name="category" value="center" type="radio">&nbsp;Center<br>
                <input name="category" value="none" type="radio">&nbsp;None<br>
              </p>
            </td>
            <td>
            <p> <img id="texture" alt="random" height="300" width="300">
            <input id="readyButton" type="Button" value="Ready?">
            <input id="submitButton" name="Submit" value="Submit" type="submit">
            </p>
          </tr>
        </tbody>
      </table>

    <h4> At which point these two bars blend best when you squint? </h4>
   <p><img id="chart" alt="chart" height="133" width="868"></p>
   <p>Blending point: <input type="text" name="blending" /></p>
    <input id="textureId" name="textureId" value="" type="hidden">



</form>
<script language="Javascript">
 document.getElementById('texture').src = "http://marconioz.github.com/isotrigoz/Foot_3_even_r.jpg "
  document.getElementById('chart').src = "http://marconioz.github.com/isotrigoz/graychart.jpg "
  document.getElementById('assignmentId').value = gup('assignmentId');
  document.getElementById('textureId').value = decode(gup('imageurl'));
  document.getElementById('readyButton').onclick=timedTexture(){
   var t1=setTimeout('settexture()',5000);
   var t2=setTimeout('setmask',10000);
   };



   //
    // Check if the worker is PREVIEWING the HIT or if they've ACCEPTED the HIT
    //
      if (gup('assignmentId') == "ASSIGNMENT_ID_NOT_AVAILABLE")
      {
      //If we're previewing, disable the button and give it a helpful message
      document.getElementById('submitButton').disabled = true;
       document.getElementById('submitButton').value = "You must ACCEPT the HIT before you can submit the results.";
      } else {
         var form = document.getElementById('mturk_form');


          if (document.referrer && ( document.referrer.indexOf('workersandbox') != -1) ) {
           form.action = "http://workersandbox.mturk.com/mturk/externalSubmit";
         }
      }
</script>
</body>
</html>




