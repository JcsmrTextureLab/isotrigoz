<!-- This file needs to be hosted on an external server.  -->
<html>
  <head>
    <title> IsotrigOz </title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <script language="Javascript">
//
// This method Gets URL Parameters (GUP)
//
function gup( name )
{
  var regexS = "[\\?&]"+name+"=([^&#]*)";
  var regex = new RegExp( regexS );
  var tmpURL = window.location.href;
  var results = regex.exec( tmpURL );
  if( results == null )
    return "";
  else
    return results[1];
}

//
// This method decodes the query parameters that were URL-encoded
//
function decode(strToDecode)
{
  var encoded = strToDecode;
  return unescape(encoded.replace(/\+/g,  " "));
}

</script> </head>
  <body>
    <form id="mturk_form" method="POST" action="http://workersandbox.mturk.com/mturk/externalSubmit">
      <input id="assignmentId" name="assignmentId" value="" type="hidden">
      <table border="0" height="100%" width="100%">
        <tbody>
          <tr>
            <td>
              <h1>Where is the oddball patch in this image, if any?</h1>
              <p> <input name="category" value="top left" type="radio">&nbsp;Top
                Left <br>
                <input name="category" value="top right" type="radio">&nbsp;Top
                Right <br>
                <input name="category" value="bottom left" type="radio">&nbsp;Bottom
                Left <br>
                <input name="category" value="bottom right" type="radio">&nbsp;Bottom
                Right<br>
                <input name="category" value="none" type="radio">&nbsp;None<br>
              </p>
              <p> <img id="texture" alt="random" height="400" width="400">
              <input id="submitButton" name="Submit" value="Submit" type="submit">
              </p>
            </td>
          </tr>
          <tr>
          </tr>
        </tbody>
      </table>
    </form>
    <script language="Javascript">
      document.getElementById('texture').src = "http://marconioz.github.com/isotrigoz/Foot_3_even_r.jpg "
      document.getElementById('assignmentId').value = gup('assignmentId');


    //
    // Check if the worker is PREVIEWING the HIT or if they've ACCEPTED the HIT
    //
      if (gup('assignmentId') == "ASSIGNMENT_ID_NOT_AVAILABLE")
      {
      //If we're previewing, disable the button and give it a helpful message
      document.getElementById('submitButton').disabled = true;
       document.getElementById('submitButton').value = "You must ACCEPT the HIT before you can submit the results.";
      } else {
         var form = document.getElementById('mturk_form');
         document.getElementById('texture').src = decode(gup('imageurl'));
           if (document.referrer && ( document.referrer.indexOf('workersandbox') != -1) ) {
           form.action = "http://workersandbox.mturk.com/mturk/externalSubmit";
         }     
      }

</script>
  </body>
</html>
