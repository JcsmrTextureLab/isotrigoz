<!-- This file needs to be hosted on an external server.  -->
<html>
  <head>
    <title> IsotrigOz </title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <script language="Javascript">
//
// This method Gets URL Parameters (GUP)
//
function gup( name )
{
  var regexS = "[\\?&]"+name+"=([^&#]*)";
  var regex = new RegExp( regexS );
  var tmpURL = window.location.href;
  var results = regex.exec( tmpURL );
  if( results == null )
    return "";
  else
    return results[1];
}

//
// This method decodes the query parameters that were URL-encoded
//
function decode(strToDecode)
{
  var encoded = strToDecode;
  return unescape(encoded.replace(/\+/g,  " "));
}

//
// Set parameters
//
var feedback0 =new Array();
var feedback1 =new Array();

var home=decode(gup('imageurl'));
var rn=1;
var ct=5;
var str="";


function settexture()
{
document.getElementById('texture').src=home +"t"+rn+ ".jpg"
}

function setmask()
{
document.getElementById('texture').src=home +"t" +1+ ".jpg"
}

function timedTexture()
{
rn=Math.ceil(200*Math.random());
var t1=setTimeout('settexture(rn)',1000);
var t2=setTimeout('setmask(rn)',2000);
easytiger();
}

function easytiger()
{
document.getElementById('readyButton').disabled = true;
document.getElementById('readyButton').value = "Please select a location";
enableit();
}

function gotiger(){
document.getElementById('readyButton').disabled = false;
document.getElementById('readyButton').value ="Ready?";
}


function ipick(choice)
{str=String(choice);

document.getElementById(str).name="cat" +ct;
document.getElementById('feedback1').value=home;
document.getElementById('feedback2').value=document.getElementById(str).value;
document.getElementById('feedback3').value="t"+rn+".jpg";

feedback0.push(document.getElementById(str).value);
feedback1.push("t"+rn+".jpg");

if(ct==1){
disableit();
document.getElementById('readyButton').disabled==true;
document.getElementById('readyButton').value ="you are done with this hit, click submit";
document.getElementById('feed0').value=feedback0;
document.getElementById('feed1').value=feedback1;
}else{
ct=ct-1;
disableit();
var t3=setTimeout('cleanit()',1000);
gotiger();
}
}


function cleanit()
{
for(i=0;i<=5;i++){
if(document.getElementById("R"+i).checked){document.getElementById("R"+i).checked=false}
}
}

function disableit(){
for(i=0;i<=5;i++){document.getElementById("R"+i).disabled=true}
}

function enableit(){
for(i=0;i<=5;i++){document.getElementById("R"+i).disabled=false}
}








</script>
</head>
  <body>

      <form id="mturk_form" method="POST" action="http://workersandbox.mturk.com/mturk/externalSubmit">

      <input id="assignmentId" name="assignmentId" value="" type="hidden">
      


        <table >
        <tbody>
          <tr>
            <td>
            <input id="readyButton" type="Button" value="Ready?" onclick="timedTexture()" />

              <h4>Where is the oddball patch in this image, if any?</h4>
              <p> <input id="R0" name="cat"  onclick="ipick(this.id)" value="top left" type="radio" >&nbsp;Top
                Left <br>
                <input id="R1"   name="cat"   onclick="ipick(this.id)" value="top right" type="radio">&nbsp;Top
                Right <br>
                <input id="R2"  name="cat"    onclick="ipick(this.id)" value="bottom left" type="radio">&nbsp;Bottom
                Left <br>
                <input id="R3"  name="cat"    onclick="ipick(this.id)" value="bottom right" type="radio">&nbsp;Bottom
                Right<br>
                <input id="R4"  name="cat"    onclick="ipick(this.id)" value="center" type="radio">&nbsp;Center<br>
                <input id ="R5"  name="cat"   onclick="ipick(this.id)" value="none" type="radio" >&nbsp;None<br>
              </p>




            </td>
            <td>
            <p> <img id="texture" alt="random" height="300" width="300">

            <input id="submitButton" name="Submit" value="Submit" type="submit">
            </p>
          </tr>
        </tbody>
      </table>


  <h4> Your last selection was </h4>

   <input id="feedback1" type="text" name="TextureFamily" value=""><br>
   //<input id="feedback2" type="text" name="txt2" value=""><br>
   //<input id="feedback3" type="text" name="txt3" value=""><br>
   <input id="feed0" name="feed0" value="" type="hidden">
   <input id="feed1" name="feed1" value="" type="hidden">




   <h4> At which point these two bars blend best when you squint? </h4>
   <p><img id="chart" alt="chart" height="133" width="868"></p>
   <p>Blending point: <input type="text" name="blending" value="not for now"/></p>





</form>
<script language="Javascript">

document.getElementById('assignmentId').value = gup('assignmentId');
document.getElementById('texture').src =  home +"t3.jpg";

document.getElementById('chart').src = home +"graychart.jpg";

if(!document.getElementById('readyButton').disabled){disableit()}else{enableit()};





    //
    // Check if the worker is PREVIEWING the HIT or if they've ACCEPTED the HIT
    //
      if (gup('assignmentId') == "ASSIGNMENT_ID_NOT_AVAILABLE")
      {
      //If we're previewing, disable the button and give it a helpful message
      document.getElementById('submitButton').disabled = true;
       document.getElementById('submitButton').value = "You must ACCEPT the HIT, and finish a batch of 5 textures before you can submit the results.";
      } else {
         var form = document.getElementById('mturk_form');
          if (document.referrer && ( document.referrer.indexOf('workersandbox') != -1) ) {
           form.action = "http://workersandbox.mturk.com/mturk/externalSubmit";
           
           
           
         }
      }
</script>
</body>
</html>




