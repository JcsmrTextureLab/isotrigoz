<!DOCTYPE html>
<html lang="en">
  <head>    
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<link rel="stylesheet" href="css/global.css">
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js"></script>
	  <script src="src/slides.jquery.js"></script>
	  <script>
	    $(function(){
			$('#slides').slides({
				preload: false,
				preloadImage: '',
				play: 5000,
				pause:0,			
				hoverPause: true,
				animationStart: function(current){
					$('.caption').animate({
						bottom:-35
					},200);
					$('.trmask').animate({
					  right:300,
						opacity:0
					},200);
					
					$('.tlmask').animate({
					  right:600,
						opacity:0
					},200);
					
          $('.ttmask').animate({
					  top:0,
						opacity:0
					},200);
					
					$('.tbmask').animate({
					  top:200,
						opacity:0
					},200);
					
					if (window.console && console.log) {
						// example return of current slide number
						console.log('animationStart on slide: ', current);
					};
				},
				animationComplete: function(current){
					$('.caption').animate({
						bottom:0
					},1000);
					if (window.console && console.log) {
						// example return of current slide number
						console.log('animationComplete on slide: ', current);
						
					};
					$('.trmask').animate({
					  opacity:0.8,
						right:340
						},500);
						
				  $('.tlmask').animate({
					  opacity:0.8,
						right:450
						},500);	
						
					$('.ttmask').animate({
					  opacity:0.8,
						top:40
					},200);
					
					$('.tbmask').animate({
					  opacity:0.8,
					  top:150
					},200);	
						
						
						
						
										
				},
				slidesLoaded: function(){
					$('.caption').animate({
						bottom:0						
					},1000);
			
},
						
			});
		});
	
  </script>
	<script language="Javascript">

    //
    // This method Gets URL Parameters (GUP)
    //
    function gup( name )
    {
    var regexS = "[\\?&]"+name+"=([^&#]*)";
    var regex = new RegExp( regexS );
    var tmpURL = window.location.href;
    var results = regex.exec( tmpURL );
    if( results == null )
    return "";
    else
    return results[1];
    }

    //
    // This method decodes the query parameters that were URL-encoded
    //
    function decode(strToDecode)
    {
    var encoded = strToDecode;
    return unescape(encoded.replace(/\+/g,  " "));
    }

		
		function contains(a, obj) {
    var i = a.length;
    while (i--) {
       if (a[i] === obj) {
           return true;
       }
    }
    return false;
    }
		
		
		
		
		
		
		
	
    //
    // Set parameters
    //
    var feedback0 =new Array();
    var feedback1 =new Array();
		var feedback2 =new Array();
		var feedback3 =new Array();
		var tcatch=new Array(4);
		for(i=1;i<=4;i++){tcatch[i]=Math.ceil(20*Math.random());}
		
 
    var sheight = screen.height;
    var swidth = screen.width;
		var wwidth = window.innerWidth;
		
    var home=windowopener.home;
		document.write(home)
    var rhome="http://marconioz.github.com/isotrigoz/turk/"
	  var ehome="http://marconioz.github.com/isotrigoz/turk/CHUBB/isotrigons/Box/odd/"
		var tclass="";
    var rn=1;
		var thome=home;
    var ct=20;
    var str="";
		
		
		


    function settexture()
    {
		if (contains(tcatch,ct)) {thome=ehome;tclass="easy";} else{thome=home;tclass="current";}
		feedback3.push(tclass);
    try
    {
    document.getElementById('texture').src=thome +"t"+rn+ ".png"
    }
    catch(err1)
    {
    try
    {
    document.getElementById('texture').src=thome +"t"+rn+ ".png"
    }
    catch(err2)
    {
    txt="There was an error loading this texture.\n\n";
    txt+="Error description: " + err2.message + "\n\n";
    txt+="Click OK to continue.\n\n";
    alert(txt);
    }
    }
    }

    function setmask()
    {		
    try
    {
    document.getElementById('texture').src=rhome +"t0.png"
    }
    catch(err1)
    {
    try
    {
    document.getElementById('texture').src=rhome +"t0.png"
    }
    catch(err2)
    {
    txt="There was an error on this page.\n\n";
    txt+="Error description: " + err2.message + "\n\n";
    txt+="Click OK to continue.\n\n";
    alert(txt);
    }
    }
    }


    function timedTexture()
    {
    
		rn=Math.ceil(1999*Math.random());
		
    var t1=setTimeout('settexture(rn)',300);
    var t2=setTimeout('setmask(rn)',2300);
    easytiger();
    document.getElementById('togo').value= ct;
    }

    function easytiger()
    {
    document.getElementById('readyButton').disabled = true;
    document.getElementById('readyButton').value = "Please select a location";
		
		document.getElementById('kudos').style.visibility="hidden";
    enableit();
    }

    function gotiger(){
    document.getElementById('readyButton').disabled = false;
    document.getElementById('readyButton').value ="Ready?";
    }


		function teacher(r,s){
		if (r%8==1||r%8==2){if (s=="R2") {return true} else{return false} }//right
		if (r%8==3||r%8==4){if (s=="R1"){return true} else{return false} }//left
		if (r%8==5||r%8==6){if (s=="R0"){return true} else{return false} }//top
		if (r%8==7||r%8==0){if (s=="R3"){return true} else{return false} }//bottom
		if (s=="Duh!missed!"){return "NaN"};	
		} 
		
	
    function ipick(choice)
    {str=String(choice);
    var aux=teacher(rn+1,str); 
		
		
		if (aux==false){ 
		document.getElementById('kudos').style.visibility="visible"};
    
		document.getElementById(str).name="cat" +ct;
    document.getElementById('feedback1').value=thome;


    feedback0.push(document.getElementById(str).value);
    feedback1.push("t"+rn+".jpg");
		feedback2.push(aux);
		
    
		
		
		
    if(ct==0){
    disableit();
    document.getElementById('readyButton').disabled==true;
    document.getElementById('readyButton').value ="Done! click submit";
    document.getElementById('submitButton').disabled =false;
    document.getElementById('submitButton').value = "Submit";


    document.getElementById('feed0').value=feedback0;
    document.getElementById('feed1').value=feedback1;
		document.getElementById('feed2').value=feedback2;
		document.getElementById('feed3').value=feedback3;
    }else{
    document.getElementById('submitButton').disabled = true;
    document.getElementById('submitButton').value = "Complete before submitting.";
    ct=ct-1;

    disableit();
    var t3=setTimeout('cleanit()',1000);
    gotiger();
    }
    }
    
		

    function cleanit()
    {
    for(i=0;i<=4;i++){
    if(document.getElementById("R"+i).checked){document.getElementById("R"+i).checked=false}
    }
    }

    function disableit()
		{
    for(i=0;i<=4;i++){document.getElementById("R"+i).disabled=true}
    }

    function enableit()
		{
    for(i=0;i<=4;i++){document.getElementById("R"+i).disabled=false}
    }

   </script>
	 	<script type="text/javascript">
   function hideshow(which){
   if (!document.getElementById)
   return
   if (which.style.display=="block")
   which.style.display="none"
   else
   which.style.display="block"
   }
	 

	 
	 
	 
   </script>
	 
	 <script> 
	 //browser detect
	 var BrowserDetect = {
	init: function () {
		this.browser = this.searchString(this.dataBrowser) || "An unknown browser";
		this.version = this.searchVersion(navigator.userAgent)
			|| this.searchVersion(navigator.appVersion)
			|| "an unknown version";
		this.OS = this.searchString(this.dataOS) || "an unknown OS";
	},
	searchString: function (data) {
		for (var i=0;i<data.length;i++)	{
			var dataString = data[i].string;
			var dataProp = data[i].prop;
			this.versionSearchString = data[i].versionSearch || data[i].identity;
			if (dataString) {
				if (dataString.indexOf(data[i].subString) != -1)
					return data[i].identity;
			}
			else if (dataProp)
				return data[i].identity;
		}
	},
	searchVersion: function (dataString) {
		var index = dataString.indexOf(this.versionSearchString);
		if (index == -1) return;
		return parseFloat(dataString.substring(index+this.versionSearchString.length+1));
	},
	dataBrowser: [
		{
			string: navigator.userAgent,
			subString: "Chrome",
			identity: "Chrome"
		},
		{ 	string: navigator.userAgent,
			subString: "OmniWeb",
			versionSearch: "OmniWeb/",
			identity: "OmniWeb"
		},
		{
			string: navigator.vendor,
			subString: "Apple",
			identity: "Safari",
			versionSearch: "Version"
		},
		{
			prop: window.opera,
			identity: "Opera",
			versionSearch: "Version"
		},
		{
			string: navigator.vendor,
			subString: "iCab",
			identity: "iCab"
		},
		{
			string: navigator.vendor,
			subString: "KDE",
			identity: "Konqueror"
		},
		{
			string: navigator.userAgent,
			subString: "Firefox",
			identity: "Firefox"
		},
		{
			string: navigator.vendor,
			subString: "Camino",
			identity: "Camino"
		},
		{		// for newer Netscapes (6+)
			string: navigator.userAgent,
			subString: "Netscape",
			identity: "Netscape"
		},
		{
			string: navigator.userAgent,
			subString: "MSIE",
			identity: "Explorer",
			versionSearch: "MSIE"
		},
		{
			string: navigator.userAgent,
			subString: "Gecko",
			identity: "Mozilla",
			versionSearch: "rv"
		},
		{ 		// for older Netscapes (4-)
			string: navigator.userAgent,
			subString: "Mozilla",
			identity: "Netscape",
			versionSearch: "Mozilla"
		}
	],
	dataOS : [
		{
			string: navigator.platform,
			subString: "Win",
			identity: "Windows"
		},
		{
			string: navigator.platform,
			subString: "Mac",
			identity: "Mac"
		},
		{
			   string: navigator.userAgent,
			   subString: "iPhone",
			   identity: "iPhone/iPod"
	    },
		{
			string: navigator.platform,
			subString: "Linux",
			identity: "Linux"
		}
	]

};
BrowserDetect.init();


</script>
	 
 <title>Tag-a-Texture</title>
  </head>
  <body>

<h4 align="center" ><a style="color:red;font-weight:bold" 
href="javascript:hideshow(document.getElementById('container'))">click here to hide/show the Instruction part.</a><h4/><br/>



<div id="container" style="display: block">
 

<h4 align="center" > Where is the oddball strip in an image?<h4/><br />
Have a look at this slide show. <br/>
This HIT is a visual perception task that probes how the brain and particularly 
the visual system works. We have used this task in our labs among ourselves and 
with a few volunteers. Now we want to validate our findings with a large pool of 
subjects, so your help is very appreciated. Here are some samples of what you will see:<br/> 


<br />
<div id="example">
			
			<div id="slides">			
				<div class="slides_container">
					
					<div class="slide">
						<img  src="http://marconioz.github.com/isotrigoz/turk/CHUBB/isotrigons/Box/even/t0.png"  width="270" height="270" alt="Slide 1"/></a>					
						<div class="trmask"></div>
						<div class="caption" style="bottom:0">					
            <p>Right structured band on random background</p>
						</div>
         </div>

         <div class="slide">					
						<img  src="http://marconioz.github.com/isotrigoz/turk/CHUBB/isotrigons/Box/even/t2.png"  width="270" height="270" alt="Slide 2"/></a>
						<div class="tlmask"></div>
						<div class="caption">
						<p>Left structured band on random background</p>
						</div>
					</div>
					
					
					<div class="slide">						
						<img  src="http://marconioz.github.com/isotrigoz/turk/CHUBB/isotrigons/Box/even/t4.png"  width="270" height="270" alt="Slide 3"/></a>						
						<div class="ttmask"></div>
						<div class="caption">					
							<p>Top structured band on random background </p>
						</div>
					</div>
					
					<div class="slide">						
						<img   src="http://marconioz.github.com/isotrigoz/turk/CHUBB/isotrigons/Box/even/t6.png"  width="270" height="270" alt="Slide 4"/></a>						
						<div class="tbmask"></div>
						<div class="caption">
							<p>Bottom structured band on random background</p>
						</div>
					</div>
					
					
					<div class="slide">						
						<img   src="http://marconioz.github.com/isotrigoz/turk/CHUBB/isotrigons/Box/even/t1.png"  width="270" height="270" alt="Slide 5"/></a>
						<div class="trmask"></div>
						<div class="caption">
						 	<p>Right random band on structured background</p>
						</div>
					</div>
					
					<div class="slide">
						<img   src="http://marconioz.github.com/isotrigoz/turk/CHUBB/isotrigons/Box/even/t3.png"  width="270" height="270" alt="Slide 6"/></a>
						<div class="tlmask"></div>
						<div class="caption">
							<p>Left random band on structured background</p>
						</div>
					</div>


					<div class="slide">						
 						<img  src="http://marconioz.github.com/isotrigoz/turk/CHUBB/isotrigons/Box/even/t5.png"  width="270" height="270" alt="Slide 7"/></a>
						<div class="ttmask"></div>
						<div class="caption">
								<p>Top random band on structured background</p>
						 </div>
					</div>
					
					<div class="slide" >
             <img  src="http://marconioz.github.com/isotrigoz/turk/CHUBB/isotrigons/Box/even/t7.png"  width="270" height="270" alt="Slide 8"/></a>
                <div class="tbmask"></div>
								<div class="caption">
							    <p>Bottom random band on structured background</p>
						    </div>
          </div>

			
				 <div class="slide">					
					<img id="t0" src="http://marconioz.github.com/isotrigoz/turk/CHUBB/isotrigons/Box/even/t0.png"  width="270" height="270" alt="Slide 9"/></a>						
						<div class="trmask"></div>
						<div class="caption" style="bottom:0">					
							<p>Right structured band on random background</p>
						</div>
					</div>
					
				<div class="slide">
						<img id="t1" src="http://marconioz.github.com/isotrigoz/turk/CHUBB/isotrigons/Box/even/t2.png"  width="270" height="270" alt="Slide 10"/></a>
						<div class="tlmask"></div>
						<div class="caption">
							<p>Left structured band on random background</p>
						</div>
					</div>

					<div class="slide">
						<img  id="t2" src="http://marconioz.github.com/isotrigoz/turk/CHUBB/isotrigons/Box/even/t4.png"  width="270" height="270" alt="Slide 11"/></a>
						<div class="ttmask"></div>
						<div class="caption">
							<p>Top structured band on random background </p>
						</div>
					</div>

					<div class="slide">
						<img  id="t3" src="http://marconioz.github.com/isotrigoz/turk/CHUBB/isotrigons/Box/even/t6.png"  width="270" height="270" alt="Slide 12"/></a>
						<div class="tbmask"></div>
						<div class="caption">
							<p>Bottom structured band on random background</p>
						</div>
					</div>

					<div class="slide">						
						<img  id="t4" src="http://marconioz.github.com/isotrigoz/turk/CHUBB/isotrigons/Box/even/t1.png"  width="270" height="270" alt="Slide 13"/></a>
						<div class="trmask"></div>
						<div class="caption">
							<p>Right random band on structured background</p>
						</div>
					</div>

					<div class="slide">						
						<img  id="t5" src="http://marconioz.github.com/isotrigoz/turk/CHUBB/isotrigons/Box/even/t3.png"  width="270" height="270" alt="Slide 14"/></a>
						<div class="tlmask"></div>
						<div class="caption">
			  			<p>Left random band on structured background</p>
						</div>
					</div>
				
					<div class="slide">
						<img  id="t6" src="http://marconioz.github.com/isotrigoz/turk/CHUBB/isotrigons/Box/even/t5.png"  width="270" height="270" alt="Slide 15"/></a>
						<div class="ttmask"></div>
						<div class="caption">					
							<p>Top random band on structured background</p>
						</div>
						</div>
						
					<div class="slide" >
           <img id="t7" src="http://marconioz.github.com/isotrigoz/turk/CHUBB/isotrigons/Box/even/t7.png"  width="270" height="270" alt="Slide 16"/></a>
						<div class="tbmask"></div>
						<div class="caption">					  	    
							     <p>Bottom random band on structured background</p>
						</div>
				    </div>

				</div>
				
				<a href="#" class="prev"><img src="img/arrow-prev.png" width="24" height="43" alt="Arrow Prev"/></a>
				<a href="#" class="next"><img src="img/arrow-next.png" width="24" height="43" alt="Arrow Next"/></a>
			</div>
			<img src="img/example-frame.png"  height="241" alt="Example Frame" id="frame"/>
</div>
		Textures may be composed of a structured band over a random background, 
		or the other way around (that is, a random band over a structured background).  
		The band will appear in one of four places: top, bottom, left, or right.  
		Your job is just to find which of these locations has the band.<br/>
 
The movie shows some examples. In the first few examples, the band is structured 
and the background is random; in the next examples, it is the other way around
(a random band on a structured background). You can pause the slides by hovering 
the mouse over a slide, and navigate back and forth with the controllers. 
During the task, the position of the band will be randomized among these four 
locations (top, bottom, left, or right), and whether the band is structured or 
the background is structured will also be randomized.  We expect that some trials 
will be as easy and some will be hard, just like in the movie.  
The movie indicates the location of the band with a red box; this is just to 
explain the task; it will not appear during the HIT.<br/>
<br/>
		
		
Lets start the task.<br/>
 
After you click the Ready? button below, a texture will appear for about 2 seconds 
somewhere inside this image. After that the original random image will come back. 
The texture may be either random or structured, but, as a reminder, your job is just 
to find its location. Indicate your choice by clicking on the button corresponding 
to its location.  If you are not sure, make your best guess. In some cases, 
it may be very hard to see where the band is, but we still prefer that you make 
your best guess.  Please only click on the 'duh' button if you think your attention 
lapsed, as we are just as interested in your best guesses as in when you are 
pretty sure of where the band is.</br>
Submit only after you finish a batch of 20. </br> </br>
</div>
<h4 align="center" style="margin: -15px 150px"> <a style="color:green;font-weight:bold" 
href="javascript:hideshow(document.getElementById('bag'))">click here to show/hide the Task part. </a><h4/>



<script language="Javascript">
						 var patord=[0,2,4,6,1,3,5,7];
	           for(i=0;i<=7;i++){
						 document.getElementById("t"+i).src=home+"t" +patord[i]+ ".png"}
						 

</script>

<div id="bag" style="display: none;margin: 15px 150px">

    <form id="mturk_form"
          method="post"
          action="http://workersandbox.mturk.com/mturk/externalSubmit"
          name="mturk_form">
      <input id="assignmentId"
            name="assignmentId"
            value=""
            type="hidden" />
						
					
      <div id="tbox">
              Click here <input id="readyButton"
                  type="button"								
                  value="Ready?"
                  onclick="timedTexture()" />when you ready.<br/>
							
			 <table >


			 <tr ><td> 					
			 <div style="margin:0px 260px">					
			 <input id="R0" 			           
                  name="cat"
                  onclick="ipick(this.id)"
                  value="Top"
                  type="Button" 
									style="cursor:pointer; border: none; background:url('ticonT.png');height:50px; width:50px;background-size:50px 50px;background-repeat:no-repeat"; /> <br/>
			 <div/>
			 <td/>
			 
			 <tr><td>
			 <div style="margin:0px 25px" >
			 <input id="R1"
                  name="cat"
                  onclick="ipick(this.id)"
                  value="Left"
                  type="Button" 
									style="cursor:pointer; border: none; background:url('ticonL.png');height:50px; width:50px;background-size:50px 50px;background-repeat:no-repeat"; />
			 <div/>
			 <td/>
			 
			  <td>
				<div style="margin:0px -500px;position:relative;height:400px; width:400px" >																
   			<img id="texture"alt="random" name="texture"  src="t0.png" style="position: relative; top: 0; left: 0;"/>
				<img id="kudos"alt="kudos" name="kudos"  src="img/mule.png"  style="visibility:hidden;height:50px; width:50px;position: relative; top: -225px; left: 175px;"/>			
				<div/>
        <td/>        

       <td>
				<div style="margin:10px -100px">	
        <input id="R2"
                  name="cat"
                  onclick="ipick(this.id)"
                  value="Right"
                  type="Button"
									style="cursor:pointer; border: none; background:url('ticonR.png');height:50px; width:50px;background-size:50px 50px;background-repeat:no-repeat"; />
        <div/>
				<td/>
				<tr/>
				 
				<tr><td>
				  <div style="margin:0px 260px;position:relative">	
					<input id="R3"
                  name="cat"
                  onclick="ipick(this.id)"
                  value="Bottom"
                  type="Button" 
									style="cursor:pointer; border: none; background:url('ticonB.png');height:50px; width:50px;background-size:50px 50px;background-repeat:no-repeat"; />
          <div/>
					<td/>
					<tr/>
					<table/>         
					<input id="R4"					    
                  name="cat"
                  onclick="ipick(this.id);ct=ct+1;"
                  value="Duh,missed!"
                  type="Button"
			           align="middle" /> <br/>									
                Don't abuse the "Duh" button, the HIT may expire early...<br/>
								
								You've got   
                  <input id="togo"
									readonly="true"
                  name="togo"
									size="5"
                  value=""
                  type="text" /> to go. Click here after you finish the batch
              
							<input id="submitButton"
                  name="submit"
                  value="Submit"
                  type="submit"
									disabled="true"/><br />
           
     </div>
</div>
</div>
	
			<input id="feedback1"
            type="hidden"
            name="TextureFamily"
            value="" /><br />
      <input id="feed0"
            name="feed0"
            value=""
            type="hidden" /> 
						
			<input id="feed1"
            name="feed1"
            value=""
            type="hidden" />
						    
			<input id="feed2"
			     name="feed2"
					 value=""
					 type="hidden" />
					 
			<input id="feed3"
					 name="feed3"
					 value=""
					 type="hidden" />			
						

						
				Looks like your screen resolution is:<br />
        <input id="screen"
                  name="screen"
                  type="text" 
									size="10"
									readonly="true"
									/><br />
				And looks like your browser is :<br/>					
				<input id="ubrowser"
				       name="ubrowser"
							 type="text"
							 size="25"
							 readonly="true"
							 /><br/>					
											
						
      <h4>
        At which point these two bars blend best when you squint?
      </h4><img id="chart"
            alt="chart"
            height="133"
            width="868"
            name="chart" />
      <p>
        Blending point: <input type="text"
           name="blending"
           value="not for now" 
					 size="10"/>
      </p>
 
		</form>
		
		<script language="Javascript">

		
	
    document.getElementById('screen').value=swidth + " x " + sheight;
		document.getElementById('ubrowser').value=BrowserDetect.browser +" "+ BrowserDetect.version + " on " + BrowserDetect.OS;
		
    document.getElementById('texture').height=400
	  document.getElementById('texture').width=400

    var home=decode(gup('imageurl'));
    document.getElementById('assignmentId').value = gup('assignmentId');

    try{
    document.getElementById('texture').src =  rhome+"t3.png";
    }
    catch(err1){
    try{
    document.getElementById('texture').src =  rhome +"t3.png";
    }
    catch(err2)
    {
    txt="There was an error on this page.\n\n";
    txt+="Error description: " + err2.message + "\n\n";
    txt+="Click OK to continue.\n\n";
    alert(txt);
    }
    };
	</script>
	
	
	
	
 
<script>
	
 if(!document.getElementById('readyButton').disabled){disableit()}else{enableit()};

    //
    // Check if the worker is PREVIEWING the HIT or if they've ACCEPTED the HIT
    //

      if (gup('assignmentId') == "ASSIGNMENT_ID_NOT_AVAILABLE")
      {
      //If we're previewing, disable the button and give it a helpful message
    document.getElementById('submitButton').disabled = true;
    document.getElementById('submitButton').value = "You must ACCEPT the HIT first.";

    document.getElementById('readyButton').disabled=true;
    document.getElementById('readyButton').value="ACCEPT the HIT to start";

      } else {
         var form = document.getElementById('mturk_form');
          if (document.referrer && ( document.referrer.indexOf('workersandbox') != -1) ) {
          form.action = "http://workersandbox.mturk.com/mturk/externalSubmit";

        }
      }

        
        
        document.getElementById('chart').src = "http://marconioz.github.com/isotrigoz/graychart.png";
        document.getElementById('chart').width=window.innerWidth;
   
    </script>
	

	
	
	
	
  </body>
</html>

